<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API 데이터 가져오기</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <header>
        <h1>API 데이터 가져오기</h1>
        <nav>
            <a th:href="@{/onbidproperty}" class="btn">목록으로</a>
        </nav>
    </header>

    <!-- 알림 메시지 -->
    <div th:if="${message}" class="alert alert-success">
        <span th:text="${message}"></span>
    </div>

    <!-- API 호출 안내 -->
    <div class="info-box">
        <h2>📡 KAMCO 온비드 API 데이터 가져오기</h2>
        <p>한국자산관리공사(KAMCO) 온비드 공공 API에서 부동산 매각 정보를 가져옵니다.</p>
        <ul>
            <li>시도별로 데이터를 조회할 수 있습니다</li>
            <li>한 번에 최대 100건까지 가져올 수 있습니다</li>
            <li>페이지 번호를 지정하여 다음 데이터를 가져올 수 있습니다</li>
        </ul>
    </div>

    <!-- API 호출 폼 -->
    <form th:action="@{/onbidproperty/fetch}" method="post" class="form-box">
        <h2>검색 조건</h2>

        <div class="form-row">
            <div class="form-group">
                <label for="sido">시도</label>
                <select id="sido" name="sido">
                    <option value="">전체</option>
                    <option value="서울">서울</option>
                    <option value="부산">부산</option>
                    <option value="대구">대구</option>
                    <option value="인천">인천</option>
                    <option value="광주">광주</option>
                    <option value="대전">대전</option>
                    <option value="울산">울산</option>
                    <option value="세종">세종</option>
                    <option value="경기">경기</option>
                    <option value="강원">강원</option>
                    <option value="충북">충북</option>
                    <option value="충남">충남</option>
                    <option value="전북">전북</option>
                    <option value="전남">전남</option>
                    <option value="경북">경북</option>
                    <option value="경남">경남</option>
                    <option value="제주">제주</option>
                </select>
                <small>특정 시도의 데이터만 가져오려면 선택하세요</small>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="numOfRows">가져올 데이터 개수</label>
                <input type="number"
                       id="numOfRows"
                       name="numOfRows"
                       value="10"
                       min="1"
                       max="100"
                       required>
                <small>1~100 사이의 숫자를 입력하세요 (기본값: 10)</small>
            </div>

            <div class="form-group">
                <label for="pageNo">페이지 번호</label>
                <input type="number"
                       id="pageNo"
                       name="pageNo"
                       value="1"
                       min="1"
                       required>
                <small>가져올 페이지 번호 (기본값: 1)</small>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">🔄 API 호출하여 데이터 가져오기</button>
            <a th:href="@{/onbidproperty}" class="btn">취소</a>
        </div>
    </form>

    <!-- 주의사항 -->
    <div class="warning-box">
        <h3>⚠️ 주의사항</h3>
        <ul>
            <li>API 호출 시 환경변수에 설정된 서비스키가 사용됩니다</li>
            <li>중복된 물건관리번호가 있을 경우 저장되지 않을 수 있습니다</li>
            <li>네트워크 상태에 따라 시간이 소요될 수 있습니다</li>
            <li>과도한 API 호출은 서비스 제한이 있을 수 있으니 주의하세요</li>
        </ul>
    </div>

    <footer>
        <p>&copy; 2024 온비드 물건 관리 시스템</p>
    </footer>
</div>

<style>
    .info-box {
        background: #e7f3ff;
        border-left: 4px solid #007bff;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 4px;
    }

    .info-box h2 {
        color: #007bff;
        margin-top: 0;
        margin-bottom: 15px;
    }

    .info-box ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .info-box li {
        margin: 8px 0;
        color: #333;
    }

    .warning-box {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 20px;
        margin-top: 20px;
        border-radius: 4px;
    }

    .warning-box h3 {
        color: #856404;
        margin-top: 0;
        margin-bottom: 15px;
    }

    .warning-box ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .warning-box li {
        margin: 8px 0;
        color: #856404;
    }

    .form-group small {
        display: block;
        margin-top: 5px;
        color: #666;
        font-size: 13px;
    }
</style>
</body>
</html>